<h1 class="tw-text-2xl"><%= @car.number %> <%= @car.model %> Ï£ºÏú†ÎÇ¥Ïó≠</h1>
<div class="tw-flex tw-justify-end">
  <div class="btn-group btn-group-sm" role="group" aria-label="Basic outlined example">
    <%= link_to("Ï∞®ÎüâÎ™©Î°ù", "/api/v1/car/car_list", class: "btn btn-outline-primary btn-sm") %>
    <%= link_to("/api/v1/car/xlsx_fuel_list/#{@car.id}", class: "btn btn-outline-primary btn-sm") do %>
      <i class="bi bi-file-earmark-spreadsheet"></i> ÏóëÏÖÄ
    <% end %>
    <%= link_to("Ï£ºÏú†ÎÇ¥Ïó≠ Ï∂îÍ∞Ä", "/api/v1/car/new_fuel/#{@car.id}", class: "btn btn-outline-primary btn-sm") %>
  </div>
</div>
<br>
<h2 class="tw-text-xl text-end text-primary-emphasis">Ï†ÑÏ≤¥Í∏àÏï°: <%= number_with_delimiter(@sum_of_price, :delimiter => ',') %> Ïõê</h2>
<div class="overflow-x-auto">
  <table
    class="table table-bordered table-hover mt-3"
  >
    <thead class="">
    <tr>
      <% %w[Ï£ºÏú†Ïùº ÎàÑÏ†ÅÏ£ºÌñâ Ï£ºÌñâÏ∞®Ïù¥ Ï£ºÏú†ÏÜå Ïú†Ï¢Ö Ï£ºÏú†Îã®Í∞Ä Ï£ºÏú†Îüâ Í∏àÏï° Ïó∞ÎπÑ ÎπÑÍ≥† ÏàòÏ†ï ÏÇ≠Ï†ú ÏäπÏù∏].each do |x| %>
        <th class="text-center">
          <%= x %>
        </th>
      <% end %>

    </tr>
    </thead>
    <tbody class="">
    <% if @fuels.count == 0 %>
      <tr>
        <td class="text-center" colspan="12">
          Ï£ºÏú†ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§.
        </td>
      </tr>
    <% else %>
      <% @fuels.each do |fuel| %>
        <tr>
          <td class="text-center">
            <%= fuel.refueled_at %> (<%= fuel.wday_name %>)
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.odo, delimiter: ',') %>
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.sub_odo, delimiter: ',') %>
          </td>
          <td class="text-start">
            <%= fuel.station %>
          </td>
          <td class="text-center">
            <%= fuel.fuel_type_kr %>
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.unit_price.floor, delimiter: ',') %>
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.amount, delimiter: ',') %>
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.price, delimiter: ',') %>
          </td>
          <td class="text-end">
            <%= number_with_delimiter(fuel.instant_mileage, delimiter: ',') %>
          </td>
          <td class="text-start">
            <%= fuel.footnote %>
          </td>
          <td class="text-center">
            <%= link_to "‚úèÔ∏è",
                        "/api/v1/car/edit_fuel/#{fuel.id}",
                        class: "hover:tw-opacity-50 link-underline link-underline-opacity-0 #{(fuel.admitted && !@current_user.is_admin?) ? 'tw-cursor-not-allowed tw-pointer-events-none tw-opacity-25' : ''}" %>
          </td>
          <td class="text-center">
            <%= button_to("üóëÔ∏è",
                          "/api/v1/car/delete_fuel/#{fuel.id}",
                          method: :delete,
                          class: "hover:tw-opacity-50 link-underline link-underline-opacity-0 #{(fuel.admitted && !@current_user.is_admin?) ? 'tw-cursor-not-allowed tw-pointer-events-none tw-opacity-25' : ''}",
                          form: { data: { turbo_confirm: 'Ï†ïÎßê ÏÇ≠Ï†úÌïòÏã§Í±¥Í∞ÄÏöî?' } }) %>
          </td>
          <td class="text-center">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="flexCheckDefault"
                data-controller="car"
                data-action="change->car#admit"
                data-car-what-to-admit-param="fuel"
                data-car-id-param="<%= fuel.id %>"
                <%= fuel.admitted ? 'checked' : '' %>
                <%= @current_user.is_admin? ? '' : 'disabled' %>
              >
            </div>
          </td>
        </tr>
      <% end %>
    <% end %>
    </tbody>
  </table>
</div>
