<h1 class="tw-text-2xl">Ï∞®Îüâ Î™©Î°ù</h1>
<br>
<div class="tw-flex tw-justify-end">
  <div class="btn-group btn-group-sm tw-mr-4" role="group" aria-label="Basic outlined example">
    <%= link_to("Ï∞®Îüâ Ï∂îÍ∞Ä", "/api/v1/car/new_car", class: "btn btn-outline-primary") %>
    <%= link_to("ÏóëÏÖÄ", "/api/v1/car/xlsx_car_list", class: "btn btn-outline-primary") %>
  </div>
  <div class="btn-group btn-group-sm" role="group" aria-label="Basic outlined example">
    <%= link_to("ÏÇ¨Ïö©Ï§ë", "?filter=use", class: "btn btn-outline-primary #{@filter == 'use' ? 'active' : ''}") %>
    <%= link_to("Îß§Í∞Å", "?filter=disposal", class: "btn btn-outline-primary #{@filter == 'disposal' ? 'active' : ''}") %>
    <%= link_to("Ï†ÑÏ≤¥", "?filter=all", class: "btn btn-outline-primary #{@filter == 'all' ? 'active' : ''}") %>
  </div>
</div>
<div class="overflow-x-auto">
  <table
    class="table table-bordered table-hover mt-3"
  >
    <thead class="">
    <tr>
      <% cols = %w[No. Î≤àÌò∏ Î™®Îç∏ Îì±Î°ùÏùº Î≥¥ÌóòÏÇ¨ Î≥¥ÌóòÍ∏∞Í∞Ñ Î≥¥ÌóòÎÇ¥Ïö© Îß§Í∞ÅÏùº Ï†ïÎπÑ Ï£ºÏú† ÏàòÏ†ï Îß§Í∞Å ÏÉÅÌÉú]
         cols.delete('Îß§Í∞ÅÏùº') if @filter == 'use'
         cols.delete('ÏÉÅÌÉú') if @filter == 'use'
         cols.delete('ÏÉÅÌÉú') if @filter == 'disposal'
         cols.each do |x| %>
        <th class="text-center">
          <%= x %>
        </th>
      <% end %>

    </tr>
    </thead>
    <tbody class="">
    <% if @cars.count == 0 %>
      <tr>
        <td class="text-center" colspan="<%= cols.count %>>">
          Ï∞®ÎüâÏù¥ ÏóÜÏäµÎãàÎã§.
        </td>
      </tr>
    <% else %>
      <% @cars.each do |car| %>
        <tr>
          <td class="text-center">
            <%= @index %>
            <% @index += 1 %>
          </td>
          <td class="text-center">
            <%#= link_to(
                  "#{car.number}",
                  "/api/v1/car/detail/#{car.id}",
                  class: "link-opacity-50-hover")
            %>
            <%= car.number %>
          </td>
          <td class="text-center">
            <%= car.model %>
          </td>
          <td class="text-center">
            <%= car.registered_at %>
          </td>
          <td class="text-center">
            <%= car.insurance_company %>
          </td>
          <td class="text-center">
            <%= car.insurance_start %> ~ <%= car.insurance_end %>
          </td>
          <td class="text-center">
            <%= car.insurance_desc %>
          </td>
          <% unless @filter == 'use' %>
            <td class="text-center">
              <%= car.disposed_at %>
            </td>
          <% end %>
          <td class="text-center">
            <%= link_to "üõ†Ô∏è",
                        "/api/v1/car/repair_list/#{car.id}",
                        class: "link-opacity-50-hover link-underline link-underline-opacity-0" %>
          </td>
          <td class="text-center">
            <%= link_to "‚õΩÔ∏è",
                        "/api/v1/car/fuel_list/#{car.id}",
                        class: "link-opacity-50-hover link-underline link-underline-opacity-0" %>
          </td>
          <td class="text-center">
            <%= link_to "üìù",
                        "/api/v1/car/edit_car/#{car.id}",
                        class: "link-opacity-50-hover link-underline link-underline-opacity-0" %>
          </td>
          <td class="text-center">
            <%= link_to("üßπ",
                        "/api/v1/car/sell_car/#{car.id}",
                        class: "link-opacity-50-hover link-underline link-underline-opacity-0"
                ) if car.status == 'use' %>
            <%= button_to("üîô",
                          "/api/v1/car/cancel_dispose/#{car.id}",
                          method: :post,
                          class: "link-opacity-50-hover link-underline link-underline-opacity-0",
                          form: { data: { turbo_confirm: 'Îß§Í∞ÅÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†Ïñ¥Ïöî?' } }
                ) if car.status == 'disposal' %>
          </td>
          <% if @filter == 'all' %>
            <td class="text-center">
              <%= car.status_icon %>
            </td>
          <% end %>
        </tr>
      <% end %>
    <% end %>
    </tbody>
  </table>
</div>
